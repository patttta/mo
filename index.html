<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>퐁모코 쿠리빵</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif;
  text-align: center;
  padding: 60px;
}

.logo-wrap img {
  max-width: 350px;
  cursor: pointer;
  margin-bottom: 30px;
}

.title-image img {
  max-width: 280px;
  cursor: pointer;
  margin-bottom: 30px;
}

.result {
  display: none;
  margin-top: 30px;
}

.image-box {
  position: relative;
  width: 100%;
  height: 260px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.image-box img {
  max-width: 100%;
  max-height: 100%;
  z-index: 2;
}

.result-text {
  margin-top: 18px;
  font-size: 18px;
  color: #8D7860;
}

/* 두근두근 */
@keyframes heartbeat {
  0% { transform: scale(1); }
  50% { transform: scale(1.06); }
  100% { transform: scale(1); }
}

.waiting {
  animation: heartbeat 0.6s infinite;
  opacity: 0.7;
}

/* 팝 */
@keyframes pop {
  0% { opacity: 0; transform: scale(0.85); }
  100% { opacity: 1; transform: scale(1); }
}

.pop {
  animation: pop 0.35s ease-out;
}

/* ⭐ 별 아이콘 */
.star {
  position: absolute;
  font-size: 22px;
  color: #FFD84D; /* 무조건 노랑 */
  animation: starFly 1.4s ease-out forwards;
  pointer-events: none;
  z-index: 5;
}

@keyframes starFly {
  0% {
    opacity: 0;
    transform: translate(0,0) scale(0.4);
  }
  30% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translate(var(--x), var(--y)) scale(1.2);
  }
}

.copyright {
  margin-top: 100px;
  font-size: 12px;
  color: #8D7860;
}
</style>
</head>

<body>

<div class="logo-wrap">
  <img src="https://i.imgur.com/rYcxn0Z.png" onclick="location.reload()">
</div>

<div class="title-image" onclick="drawBeads()">
  <img id="drawImage" src="https://i.imgur.com/e9JGabn.png">
</div>

<div class="result" id="resultBox">
  <div class="image-box" id="imageBox">
    <img id="resultImage">
  </div>
  <div class="result-text" id="resultText"></div>
</div>

<div class="copyright">© Pong PocoPoco Project</div>

<script>
const items = [
  { img: "https://i.imgur.com/6ZgUNGp.png", text: "뚱뚱쿠리 등장!", weight: 40 },
  { img: "https://i.imgur.com/O8UUh0T.png", text: "열공쿠리 등장!", weight: 40 },
  { img: "https://i.imgur.com/aqYwzkm.png", text: "바보쿠리 등장!", weight: 40 },
  { img: "https://i.imgur.com/OBTpOLq.png", text: "✨ 시크릿 갸루쿠리 등장!! ✨", weight: 8, hidden: true }
];

function weightedRandom(list) {
  const total = list.reduce((s, i) => s + i.weight, 0);
  let r = Math.random() * total;
  for (const item of list) {
    r -= item.weight;
    if (r < 0) return item;
  }
}

function spawnStars() {
  const box = document.getElementById("imageBox");

  for (let i = 0; i < 14; i++) {
    const star = document.createElement("div");
    star.className = "star";
    star.innerText = "★";

    const angle = Math.random() * Math.PI * 2;
    const radius = 120 + Math.random() * 60;

    const x = Math.cos(angle) * radius + "px";
    const y = Math.sin(angle) * radius + "px";

    star.style.setProperty("--x", x);
    star.style.setProperty("--y", y);

    box.appendChild(star);

    setTimeout(() => star.remove(), 1400);
  }
}

function drawBeads() {
  const box = document.getElementById("resultBox");
  const img = document.getElementById("resultImage");
  const text = document.getElementById("resultText");
  const drawImg = document.getElementById("drawImage");

  box.style.display = "block";
  img.src = "";
  text.innerText = "";

  drawImg.classList.add("waiting");

  setTimeout(() => {
    drawImg.classList.remove("waiting");

    const result = weightedRandom(items);
    img.src = result.img;
    text.innerText = result.text;
    img.classList.add("pop");

    if (result.hidden) {
      spawnStars();
    }
  }, 1200);
}
</script>

</body>
</html>
