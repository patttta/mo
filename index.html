
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íëª¨ì½” ì¿ ë¦¬ë¹µ</title>

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif;
    text-align: center;
    padding: 60px;
  }

  .logo-wrap {
    margin-bottom: 30px;
  }

  .logo-wrap img {
    max-width: 350px;
    width: 100%;
    cursor: pointer;
  }

  .title-image {
    margin-bottom: 30px;
    cursor: pointer;
  }

  .title-image img {
    max-width: 280px;
    width: 100%;
  }

  /* ê²°ê³¼ ì˜ì—­ */
  .result {
    display: none;
    margin-top: 30px;
  }

  .image-box {
    position: relative;
    width: 100%;
    height: 260px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .image-box img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 12px;
  }

  .result-text {
    margin-top: 18px;
    font-size: 18px;
    line-height: 1.5;
    color: #333;
  }

  .copyright {
    margin-top: 100px;
    font-size: 12px;
    color: #8D7860;
  }

  /* ë‘ê·¼ë‘ê·¼ ëŒ€ê¸° ì• ë‹ˆë©”ì´ì…˜ */
  @keyframes heartbeat {
    0% { transform: scale(1); }
    25% { transform: scale(1.05); }
    50% { transform: scale(1); }
    75% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  .waiting {
    animation: heartbeat 0.6s ease-in-out infinite;
    opacity: 0.7;
  }

  /* ê²°ê³¼ íŒ ì• ë‹ˆë©”ì´ì…˜ */
  @keyframes pop {
    0% { opacity: 0; transform: scale(0.85); }
    60% { opacity: 1; transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  .pop {
    animation: pop 0.35s ease-out;
  }

  /* âœ¨ íˆë“  ìƒ¤ë„ë¼ íš¨ê³¼ */
.sparkle {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.9) 0%, transparent 40%),
    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.8) 0%, transparent 40%),
    radial-gradient(circle at 50% 80%, rgba(255,255,255,0.7) 0%, transparent 45%);
  animation: sparkleFade 1.2s ease-out forwards;
  z-index: 3;
  pointer-events: none;
}

@keyframes sparkleFade {
  0% { opacity: 0; transform: scale(0.8); }
  40% { opacity: 1; }
  100% { opacity: 0; transform: scale(1.2); }
}

</style>
</head>

<body>

<div class="container">

  <!-- ë¡œê³  -->
  <div class="logo-wrap">
    <img id="logoImage"
     src="https://i.imgur.com/rYcxn0Z.png"
     alt="íëª¨ì½” ë¡œê³ "
     onclick="location.reload()">

  </div>
<div id="dateInfo" style="margin-bottom:20px; color:#8D7860; font-size:14px;">
  <div id="todayText"></div>
  <div id="countdownText"></div>
</div>
  <!-- í´ë¦­ìš© íƒ€ì´í‹€ ì´ë¯¸ì§€ -->
<div class="title-image" onclick="drawBeads()">
  <img id="drawImage"
       src="https://i.imgur.com/e9JGabn.png"
       alt="ì¿ ë¦¬ë¹µ">
</div>

  <!-- ê²°ê³¼ -->
  <div class="result" id="resultBox">
    <div class="image-box">
      <img id="resultImage" src="">
      <div id="sparkleEffect"></div>
    </div>
    <div class="result-text" id="resultText"></div>
  </div>

  <div class="copyright">
    Â© Pong PocoPoco Project
  </div>

</div>

<script>
  const TEST_MODE = true; // í…ŒìŠ¤íŠ¸ ëë‚˜ë©´ falseë¡œ

  function formatToday() {
  const d = new Date();
  return `${d.getFullYear()}ë…„ ${d.getMonth() + 1}ì›” ${d.getDate()}ì¼`;
}

function getTimeUntilMidnight() {
  const now = new Date();
  const midnight = new Date();
  midnight.setHours(24, 0, 0, 0);

  const diff = midnight - now;

  const hours = String(Math.floor(diff / (1000 * 60 * 60))).padStart(2, "0");
  const minutes = String(Math.floor((diff / (1000 * 60)) % 60)).padStart(2, "0");
  const seconds = String(Math.floor((diff / 1000) % 60)).padStart(2, "0");

  return `${hours}:${minutes}:${seconds}`;
}

  function getToday() {
    const d = new Date();
    return d.getFullYear() + "-" +
      String(d.getMonth() + 1).padStart(2, "0") + "-" +
      String(d.getDate()).padStart(2, "0");
  }

  /* ğŸ”¹ ì´ë¯¸ì§€ + ë¬¸êµ¬ ì„¸íŠ¸ (4ê°œ) */
  const items = [
    {
      img: "https://i.imgur.com/6ZgUNGp.png",
      text: "ëš±ëš±ì¿ ë¦¬ê°€ ë‚˜ì™”ë‹¤!",
      weight: 40
    },
    {
      img: "https://i.imgur.com/O8UUh0T.png",
      text: "ì—´ê³µì¿ ë¦¬ê°€ ë‚˜ì™”ë‹¤!",
      weight: 40
    },
    {
      img: "https://i.imgur.com/aqYwzkm.png",
      text: "ë°”ë³´ì¿ ë¦¬ê°€ ë‚˜ì™”ë‹¤!",
      weight: 40
    },
    {
      img: "https://i.imgur.com/OBTpOLq.png",
      text: "[ì‹œí¬ë¦¿]ê°¸ë£¨ì¿ ë¦¬ê°€ ë‚˜ì™”ë‹¤!",
      weight: 8
    }
  ];
function weightedRandom(list) {
  const total = list.reduce((sum, i) => sum + i.weight, 0);
  let r = Math.random() * total;

  for (const item of list) {
    r -= item.weight;
    if (r < 0) return item;
  }
}

function drawBeads() {
  const today = getToday();

  if (!TEST_MODE && localStorage.getItem("lastDrawDate") === today) {
    alert("ì˜¤ëŠ˜ì˜ ì½”ì½”ì•„ëŠ” ì´ì œ ê·¸ë§Œ! ë‚´ì¼ ë˜ ë§ˆì…”ë´ìš”.");
    return;
  }

  if (!TEST_MODE) {
    localStorage.setItem("lastDrawDate", today);
  }

  const box = document.getElementById("resultBox");
  const img = document.getElementById("resultImage");
  const text = document.getElementById("resultText");
  const drawImg = document.getElementById("drawImage");

  box.style.display = "block";
  img.src = "";
  text.innerText = "";

  /* ğŸ’“ ë‘ê·¼ë‘ê·¼ ì‹œì‘ */
  drawImg.classList.add("waiting");

  setTimeout(() => {
    drawImg.classList.remove("waiting");

  const result = weightedRandom(items);

img.src = result.img;
text.innerText = result.text;

img.classList.remove("pop");
void img.offsetWidth;
img.classList.add("pop");

/* âœ¨ íˆë“ (4ë²ˆì§¸) ìƒ¤ë„ë¼ íš¨ê³¼ */
if (result === items[3]) {
  const sparkle = document.getElementById("sparkleEffect");
  sparkle.className = "sparkle";
  setTimeout(() => {
    sparkle.className = "";
  }, 1200);
}

  }, 1200);
}
    // í˜ì´ì§€ ë¡œë“œì‹œ: ì˜¤ëŠ˜ ì´ë¯¸ ë½‘ì•˜ìœ¼ë©´ ìë™ í‘œì‹œ
  window.onload = function () {
    const today = getToday();
    const savedDate = localStorage.getItem("lastDrawDate");
    const savedImg = localStorage.getItem("lastDrawImg");

    if (!TEST_MODE && savedDate === today && savedImg) {
  showResult(savedImg);
  document.getElementById("notice").innerText =
    "ì˜¤ëŠ˜ì˜ ì½”ì½”ì•„ ìš´ì„¸ëŠ”?";
}
    function updateDateInfo() {
  document.getElementById("todayText").innerText =
    `ì˜¤ëŠ˜ ë‚ ì§œ Â· ${formatToday()}`;

  document.getElementById("countdownText").innerText =
    `ë‹¤ìŒ ì½”ì½”ì•„ê¹Œì§€ ë‚¨ì€ ì‹œê°„ Â· ${getTimeUntilMidnight()}`;
}
updateDateInfo();
setInterval(updateDateInfo, 1000);
</script>

</body>
</html>
