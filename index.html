<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>퐁모코 쿠리빵</title>

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif;
    text-align: center;
    padding: 60px;
  }

  .logo-wrap img {
    max-width: 350px;
    cursor: pointer;
    margin-bottom: 30px;
  }

  .title-image img {
    max-width: 280px;
    cursor: pointer;
    margin-bottom: 30px;
  }

  .result {
    display: none;
    margin-top: 30px;
  }

  .image-box {
    position: relative;
    width: 100%;
    height: 260px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: visible;
  }

  .image-box img {
    max-width: 100%;
    max-height: 100%;
    z-index: 2;
  }

  .result-text {
    margin-top: 18px;
    font-size: 18px;
  }

  /* 두근두근 */
  @keyframes heartbeat {
    0% { transform: scale(1); }
    50% { transform: scale(1.06); }
    100% { transform: scale(1); }
  }

  .waiting {
    animation: heartbeat 0.6s infinite;
    opacity: 0.7;
  }

  /* 팝 */
  @keyframes pop {
    0% { opacity: 0; transform: scale(0.85); }
    100% { opacity: 1; transform: scale(1); }
  }

  .pop {
    animation: pop 0.35s ease-out;
  }

  /* ⭐ 별 팡 효과 */
  .starburst {
    position: absolute;
    inset: -40%;
    background:
      radial-gradient(circle, rgba(255,245,200,0.9) 0%, transparent 40%),
      radial-gradient(circle at 20% 30%, rgba(255,255,180,0.9) 0%, transparent 35%),
      radial-gradient(circle at 80% 20%, rgba(255,255,200,0.9) 0%, transparent 35%),
      radial-gradient(circle at 50% 80%, rgba(255,240,170,0.9) 0%, transparent 40%);
    animation: starPop 1.4s ease-out forwards;
    z-index: 5;
    pointer-events: none;
    filter: blur(1px);
  }

  @keyframes starPop {
    0% {
      opacity: 0;
      transform: scale(0.6);
    }
    40% {
      opacity: 1;
      transform: scale(1.05);
    }
    100% {
      opacity: 0;
      transform: scale(1.4);
    }
  }

  .copyright {
    margin-top: 100px;
    font-size: 12px;
    color: #8D7860;
  }
</style>
</head>

<body>

<div class="logo-wrap">
  <img src="https://i.imgur.com/rYcxn0Z.png" onclick="location.reload()">
</div>

<div class="title-image" onclick="drawBeads()">
  <img id="drawImage" src="https://i.imgur.com/e9JGabn.png">
</div>

<div class="result" id="resultBox">
  <div class="image-box">
    <img id="resultImage">
    <div id="starEffect"></div>
  </div>
  <div class="result-text" id="resultText"></div>
</div>

<div class="copyright">© Pong PocoPoco Project</div>

<script>
  const items = [
    { img: "https://i.imgur.com/6ZgUNGp.png", text: "뚱뚱쿠리 등장!", weight: 40 },
    { img: "https://i.imgur.com/O8UUh0T.png", text: "열공쿠리 등장!", weight: 40 },
    { img: "https://i.imgur.com/aqYwzkm.png", text: "바보쿠리 등장!", weight: 40 },
    { img: "https://i.imgur.com/OBTpOLq.png", text: "✨ 시크릿 갸루쿠리 등장!! ✨", weight: 39 }
  ];

  function weightedRandom(list) {
    const total = list.reduce((s, i) => s + i.weight, 0);
    let r = Math.random() * total;
    for (const item of list) {
      r -= item.weight;
      if (r < 0) return item;
    }
  }

  function drawBeads() {
    const box = document.getElementById("resultBox");
    const img = document.getElementById("resultImage");
    const text = document.getElementById("resultText");
    const drawImg = document.getElementById("drawImage");
    const star = document.getElementById("starEffect");

    box.style.display = "block";
    img.src = "";
    text.innerText = "";
    star.className = "";

    drawImg.classList.add("waiting");

    setTimeout(() => {
      drawImg.classList.remove("waiting");

      const result = weightedRandom(items);
      img.src = result.img;
      text.innerText = result.text;

      img.classList.add("pop");

      if (result === items[3]) {
        star.className = "starburst";
        setTimeout(() => star.className = "", 1400);
      }
    }, 1200);
  }
</script>

</body>
</html>
